1. What is Docker?

        Docker is a platform for containerization.

        It allows you to package an application + its dependencies into a container.

        A container is like a lightweight virtual machine, but it shares the host kernel instead of emulating hardware.

        This makes containers faster, lighter, and more portable than VMs.

        ğŸ‘‰ Instead of â€œit works on my machine,â€ Docker ensures the same environment everywhere.

ğŸ”¹ 2. Docker Architecture & Structure

        Docker follows a clientâ€“server architecture:

        Docker Client

        You type commands (docker build, docker run, â€¦).

        The client talks to the Docker Daemon (via REST API over Unix socket or TCP).

        Docker Daemon (dockerd)

        The background service that manages images, containers, volumes, networks.

        It listens to the client requests and executes them.

        Docker Engine

        This is the whole runtime system = Client + Daemon + REST API.

        Docker Objects

        Images â†’ read-only templates used to create containers.

        Containers â†’ running instances of images.

        Networks â†’ isolated environments for containers to communicate.

        Volumes â†’ persistent data storage, decoupled from container lifecycle.

ğŸ”¹ 3. How Docker Works in the Background

        When you docker run:

        The daemon pulls the image (if not present locally).

        It creates a container filesystem (union of image layers).

        It sets up network namespace (IP, hostname, DNS).

        It mounts volumes (if defined).

        It starts the container with one main process (PID 1) inside.

        Containers run in namespaces (process isolation, networking, file systems) and cgroups (resource limits).

ğŸ”¹ 4. PID 1 & the Container Process

        In Linux, PID 1 is the first process inside a container.

        It has special responsibilities (reaping zombie processes, handling signals).

        If PID 1 dies, the container stops.

        Thatâ€™s why Dockerfiles usually end with:

        CMD ["nginx", "-g", "daemon off;"]


        â†’ ensures the main service runs as PID 1.

        ğŸ‘‰ In our project:

        mysqld_safe runs as PID 1 in the MariaDB container.

        php-fpm runs as PID 1 in the WordPress container.

        nginx runs as PID 1 in the Nginx container.

ğŸ”¹ 5. Docker Engine vs Docker Daemon

        Docker Engine = whole system (CLI, Daemon, API).

        Docker Daemon (dockerd) = just the background process managing containers.

        Docker Client = CLI tool that talks to the Daemon.

ğŸ”¹ 6. Docker Compose

        Docker Compose is a tool to define and run multi-container apps.

        Instead of manually running containers one by one, you define a docker-compose.yml with:

        Services (containers)

        Networks

        Volumes

        Dependencies (depends_on)

        You launch everything with:

        docker-compose up --build


        ğŸ‘‰ In our project:

        mariadb service = DB container

        wordpress service = PHP-FPM + WordPress container

        nginx service = Web server + SSL container

        Volumes wp & db keep data persistent.

        app-network allows communication between services.

ğŸ”¹ 7. Docker Networking

        Docker creates different network drivers:

        bridge (default): isolated network with private IPs, containers talk via service names.

        host: shares the host network.

        overlay: for multi-host Swarm.

        none: no networking.

        ğŸ‘‰ In Compose, we defined:
                networks:
                app-network:
                driver: bridge
                So:
                wordpress can connect to mariadb by hostname mariadb:3306.

        nginx can reach wordpress via wordpress:9000.

ğŸ”¹ 8. Steps to Create a Valid Docker Project

        Plan architecture: Which services? Which should be separate containers?
        (Inception constraint: one service per container).

        - Write Dockerfiles for each service:

                Start from alpine or debian.

                Install only what is needed.

                Copy configs, scripts.

                Set CMD or ENTRYPOINT to run the main process.

        - Use volumes for persistence (databases, user files).

        - Configure networks so services can talk by name.

        - Secure services (SSL for Nginx, non-root DB user, etc.).

        - Write docker-compose.yml to orchestrate everything.

        - Test lifecycle: build, up, down, restart â†’ check persistence and networking.

        - Clean images: small base images, remove cache, donâ€™t leave secrets inside.

ğŸ”¹ 9. Why Docker?

        Consistency â†’ same environment everywhere.

        Isolation â†’ each service independent.

        Portability â†’ runs on any host.

        Scalability â†’ containers scale horizontally.

        Reproducibility â†’ CI/CD pipelines, reproducible builds.




                ğŸ–¥ï¸ Host Machine (laptop/PC)
                â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                /home/akrid/Desktop/inception/
                â”œâ”€â”€ srcs/
                â”‚   â”œâ”€â”€ requirements/
                â”‚   â”‚   â”œâ”€â”€ wordpress/
                â”‚   â”‚   â”œâ”€â”€ mariadb/
                â”‚   â”‚   â””â”€â”€ nginx/
                â”‚   â””â”€â”€ docker-compose.yml
                â””â”€â”€ secrets/
                    â””â”€â”€ mariadb_password.txt
                            
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                ğŸ³ Docker Engine
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   Each container has its own isolated **filesystem root `/`**
   (Debian-like structure: /etc, /usr, /var, /run, ...)

                ğŸ“¦ wordpress container |-
                â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                /
                â”œâ”€â”€ usr/local/bin/wp        â† WP-CLI binary
                â”œâ”€â”€ etc/php/7.4/fpm/        â† PHP-FPM configs
                â””â”€â”€ var/www/html/           â† WordPress site files
                        â”œâ”€â”€ index.php
                        â”œâ”€â”€ wp-config.php
                        â”œâ”€â”€ wp-content/
                        â””â”€â”€ wp-admin/

                ğŸ“¦ mariadb container
                â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                /
                â”œâ”€â”€ etc/mysql/              â† MariaDB configs
                â””â”€â”€ var/lib/mysql/          â† Database files (mounted volume)

                ğŸ“¦ nginx container
                â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                /
                â”œâ”€â”€ etc/nginx/              â† nginx.conf + ssl certs
                â””â”€â”€ var/www/html/           â† (same WP files, shared volume)
                                         
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                ğŸ“¦ Docker Volumes
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   wordpress_data â†’ mounted to /var/www/html in wordpress + nginx
   mariadb_data   â†’ mounted to /var/lib/mysql in mariadb
